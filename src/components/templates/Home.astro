---
import Features from "organisms:Features";
import Footer from "organisms:Footer";
import Sponsors from "organisms:Sponsors";
import Community from "organisms:Community";
import OpenSource from "organisms:OpenSource";
import Header from "organisms:Header";
import BrowserPreview from "organisms:BrowserPreview";
import AnalyticsEventsScript from "assets:AnalyticsEventsScript";
import { SEO } from "astro-seo";
import i18next, { t } from "i18next";
import { Icon } from "astro-icon";
import { HeadHrefLangs } from "astro-i18next/components";

const { showBanner = false } = Astro.props;
---

<html lang={i18next.language} class="scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <HeadHrefLangs />
    <SEO
      title={t("seo.title")}
      description={t("seo.description")}
      canonical={i18next.language === "en"
        ? "https://castopod.org/"
        : `https://castopod.org/${i18next.language}`}
      openGraph={{
        basic: {
          title: t("seo.ogTitle"),
          description: t("seo.description"),
          type: "website",
          image: "https://castopod.org/assets/images/open-graph.jpg",
          url:
            i18next.language === "en"
              ? "https://castopod.org/"
              : `https://castopod.org/${i18next.language}`,
        },
        image: {
          alt: t("seo.ogImageAlt"),
          width: "1200",
          height: "630",
          type: "image/jpeg",
        },
      }}
      twitter={{
        card: "summary_large_image",
        site: "@castopod",
        creator: "@ad_aures",
      }}
    />
    <script
      defer
      data-domain="castopod.org"
      src="https://analytics.castopod.org/js/plausible.js"
    ></script>
  </head>

  <body class="grid overflow-x-hidden">
    {
      showBanner && (
        <div class="text-sm text-white bg-pine-500">
          <div class="container flex flex-wrap items-center justify-center gap-4 px-4 py-2">
            <p class="font-semibold text-center">
              <span class="text-xs font-bold tracking-wider uppercase font-display">
                ✨ Nouveau ✨
              </span>
              Hébergez vos podcasts grâce à notre offre clés en main Castopod !
            </p>
            <a
              href="https://castopod.com/"
              title="castopod.com"
              class="inline-flex items-center px-4 py-1 font-semibold bg-white rounded-full text-pine-900 gap-x-1 hover:bg-pine-100 focus:outline-none focus:ring-2 focus:ring-pine-400 focus:ring-opacity-75"
            >
              Profiter de l'offre de lancement
              <Icon
                pack="ri"
                name="arrow-right-line"
                class="h-4 text-pine-800"
              />
            </a>
          </div>
        </div>
      )
    }
    <Header />
    <main>
      <BrowserPreview />
      <Features />
      <OpenSource />
      <Community />
      <Sponsors />
    </main>
    <Footer />
    <AnalyticsEventsScript />
  </body>
</html>
