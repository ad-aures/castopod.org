---
import CastopodLogo from "assets:CastopodLogo";
import { HeadHrefLangs } from "astro-i18next/components";
import { localizePath } from "astro-i18next";
import Icon from "astro-icon";
import { SEO } from "astro-seo";
import i18next, { t } from "i18next";
import Footer from "organisms:Footer";
import Card from "molecules:Card";
import AnalyticsEventsScript from "assets:AnalyticsEventsScript";
import CastopodMascot from "assets:CastopodMascot";
---

<html lang={i18next.language} class="h-full scroll-smooth">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="icon" type="image/x-icon" href="/favicon.ico" />
    <HeadHrefLangs />
    <SEO
      title={t("common:siteTitle", { pageName: t("seo.title") })}
      description={t("seo.description")}
    />
    <script
      defer
      data-domain="castopod.org"
      src="https://analytics.castopod.org/js/plausible.js"
    ></script>
  </head>

  <body class="flex flex-col min-h-full overflow-x-hidden bg-pine-800">
    <header class="pt-12 pb-6">
      <div class="container flex flex-col items-start px-4">
        <a
          href={localizePath("/")}
          class="inline-flex gap-x-2"
          title={t("common:backToHome")}
        >
          <Icon pack="ri" name="arrow-left-line" class="h-6 text-pine-100" />
          <CastopodLogo className="h-8" />
        </a>
        <h1
          class="relative z-10 inline text-4xl font-bold font-display after:bg-pine-900 after:-z-10 text-pine-100 after:w-full after:h-1/2 after:absolute after:left-0 after:-bottom-1 after:rounded-full"
        >
          {t("pageTitle")}
          <i class="pi pi-legal"></i>
        </h1>
      </div>
    </header>
    <main class="container flex-1 pt-8 pb-16">
      <ul class="grid grid-cols-1 gap-8 md:grid-cols-3 lg:grid-cols-4">
        <li
          class="col-span-1 row-span-2 p-4 bg-white border-4 border-transparent shadow-2xl md:col-span-2 lg:col-span-2 rounded-conditional-xl"
        >
          <div class="flex flex-col">
            <h2 class="text-xl font-semibold text-pine-800 font-display">
              <Icon
                pack="ri"
                name="inbox-archive-fill"
                class="h-6 text-pine-300"
              /><span>1. {t("download")}</span>
            </h2>
            <p class="max-w-sm text-sm text-gray-500">
              {t("requirements")}
            </p>
            <div class="flex flex-row flex-wrap gap-4 mt-4">
              <a
                href={import.meta.env.PUBLIC_CASTOPOD_PACKAGE_URL}
                class="inline-flex items-center px-4 py-2 font-semibold text-white transition border-2 border-transparent rounded-full shadow-md group gap-x-2 bg-pine-500 hover:bg-pine-800 focus:outline-none focus:ring-2 focus:ring-pine-400 focus:ring-opacity-75"
                download
                data-analytics={'"Download", ' +
                  JSON.stringify({
                    props: {
                      via: "Getting Started",
                      version: import.meta.env.PUBLIC_CASTOPOD_VERSION,
                    },
                  })}
              >
                <Icon
                  pack="ri"
                  name="download-cloud-2-fill"
                  class="h-6 text-pine-800 group-hover:text-pine-500"
                />
                {
                  t("downloadCastopodWithVersion", {
                    version: import.meta.env.PUBLIC_CASTOPOD_VERSION,
                  })
                }
              </a>
              <div class="flex items-center">
                <a
                  class="text-xs underline hover:no-underline"
                  href="https://code.castopod.org/adaures/castopod/-/releases"
                  >{t("releases")}
                </a>
                <span class="mx-2">Â·</span>
                <a
                  class="text-xs underline hover:no-underline"
                  href="https://code.castopod.org/adaures/castopod/"
                  >{t("source")}
                </a>
              </div>
            </div>
          </div>
          <hr class="my-6" />
          <div class="flex flex-col">
            <h2 class="text-xl font-semibold text-pine-800 font-display">
              <Icon
                pack="ri"
                name="install-fill"
                class="h-6 text-pine-300"
              /><span>2. {t("install")}</span>
            </h2>
            <p class="max-w-sm text-sm text-gray-500">
              {t("installDescription")}
            </p>
            <ul class="grid mt-4 sm:grid-cols-2">
              <li>
                <a
                  href="https://docs.castopod.org/getting-started/docker.html"
                  class="inline-flex w-full gap-4 py-2 font-semibold group hover:underline decoration-2 decoration-pine-500 text-pine-900"
                >
                  <Icon
                    pack="ri"
                    name="arrow-right-line"
                    class="h-6 transition text-pine-200 group-hover:text-pine-500 group-focus:text-pine-500 group-hover:translate-x-1 group-focus:translate-x-1"
                  /> Docker
                </a>
              </li>
              <li>
                <a
                  href="https://install-app.yunohost.org/?app=castopod"
                  class="inline-flex w-full gap-4 py-2 font-semibold group hover:underline decoration-2 decoration-pine-500 text-pine-900"
                >
                  <Icon
                    pack="ri"
                    name="arrow-right-line"
                    class="h-6 transition text-pine-200 group-hover:text-pine-500 group-focus:text-pine-500 group-hover:translate-x-1 group-focus:translate-x-1"
                  /> YunoHost
                </a>
              </li>
              <li>
                <a
                  href="https://blog.castopod.org/install-castopod-on-cloud-panel-v2/"
                  class="inline-flex w-full gap-4 py-2 font-semibold group hover:underline decoration-2 decoration-pine-500 text-pine-900"
                >
                  <Icon
                    pack="ri"
                    name="arrow-right-line"
                    class="h-6 transition text-pine-200 group-hover:text-pine-500 group-focus:text-pine-500 group-hover:translate-x-1 group-focus:translate-x-1"
                  /> CloudPanel
                </a>
              </li>
              <li>
                <a
                  href="https://github.com/belykhk/castopod-ansible-playbook"
                  class="inline-flex w-full gap-4 py-2 font-semibold group hover:underline decoration-2 decoration-pine-500 text-pine-900"
                >
                  <Icon
                    pack="ri"
                    name="arrow-right-line"
                    class="h-6 transition text-pine-200 group-hover:text-pine-500 group-focus:text-pine-500 group-hover:translate-x-1 group-focus:translate-x-1"
                  /> Ansible Playbook
                </a>
              </li>
              <li>
                <a
                  href="https://docs.castopod.org/getting-started/install.html"
                  class="inline-flex w-full gap-4 py-2 font-semibold group hover:underline decoration-2 decoration-pine-500 text-pine-900"
                >
                  <Icon
                    pack="ri"
                    name="arrow-right-line"
                    class="h-6 transition text-pine-200 group-hover:text-pine-500 group-focus:text-pine-500 group-hover:translate-x-1 group-focus:translate-x-1"
                  />
                  {t("manual")}
                </a>
              </li>
            </ul>
          </div>
        </li>

        <Card
          link="https://docs.castopod.org/"
          icon="book-read-fill"
          title={t("documentation")}
          >{t("documentationDescription")}
        </Card>
        <Card
          link="https://code.castopod.org/adaures/castopod/-/issues"
          icon="bug-fill"
          title={t("issueTracker")}
          >{t("issueTrackerDescription")}
        </Card>
        <Card
          link="https://translate.castopod.org/"
          icon="translate-2"
          title={t("translate")}
          >{t("translateDescription")}
        </Card>
        <Card
          link="https://castopod.org/chat"
          icon="chat-smile-2-fill"
          title={t("chat")}
        >
          {t("chatDescription")}
        </Card>
        <li class="items-end justify-center hidden md:flex lg:hidden">
          <CastopodMascot className="h-48" />
        </li>
      </ul>
    </main>
    <Footer />
    <AnalyticsEventsScript />
  </body>
</html>
